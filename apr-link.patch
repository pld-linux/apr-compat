diff -ur apr-0.9.4.org/configure.in apr-0.9.4/configure.in
--- apr-0.9.4.org/configure.in	2004-04-15 23:58:33.496668112 +0200
+++ apr-0.9.4/configure.in	2004-04-16 00:02:06.178335584 +0200
@@ -597,7 +597,7 @@
 
 # The real-time POSIX extensions (e.g. shm_*, sem_*) may only
 # be available if linking against librt.
-AC_SEARCH_LIBS(shm_open, rt)
+dnl AC_SEARCH_LIBS(shm_open, rt)
 
 case $host in
  *-sysv*)
@@ -856,10 +856,13 @@
 if test "$strerror_r" = "1"; then
   APR_CHECK_STRERROR_R_RC
 fi
+save_LIBS="$LIBS"
+AC_SEARCH_LIBS(crypt, crypt ufc)
 AC_CHECK_FUNCS(crypt_r, [ crypt_r="1" ], [ crypt_r="0" ])
 if test "$crypt_r" = "1"; then
   APR_CHECK_CRYPT_R_STYLE
 fi
+LIBS="$save_LIBS"
 AC_CHECK_FUNCS(mmap, [ mmap="1" ], [ mmap="0" ])
 if test "$native_mmap_emul" = "1"; then
     mmap="1"
Tylko w apr-0.9.4: configure.in~
